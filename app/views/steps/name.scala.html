@(implicit formData: uk.gov.gds.ier.validation.InProgressForm, postEndpoint: Call)

@import helper._
@import layouts._
@import uk.gov.gds.ier.form.FormHelpers._

@main(title = Some("Register to Vote - What is your name?"), stylesheets = head(), scripts = stepsBodyEnd()) {
  @form(postEndpoint) {
  @layouts.questionHeader("What is your full name?", "/register-to-vote/date-of-birth", 4)
    <fieldset>
      @label(keys.name.firstName, label = "First name")
      @text(keys.name.firstName, attributes = Map('class -> "first-name long"))
      @label(keys.name.middleNames, label = "Middle names")
      @text(keys.name.middleNames, attributes = Map('class -> "middle-names long"))
      @label(keys.name.lastName, label = "Last name")
      @text(keys.name.lastName, attributes = Map('class -> "last-name long"))
    </fieldset>
    <fieldset class="sub-section">
      <legend class="label">Have you changed your name in the last 12 months?</legend> 
      @radio(keys.previousName.hasPreviousName, label="Yes", value = "true", labelAttributes = Map('class -> "binary"))
      @radio(keys.previousName.hasPreviousName, label="No", value = "false", labelAttributes = Map('class -> "binary"))
    </fieldset>
    <div class="optional-section optional-section-core-content @classIf(formData(keys.previousName.hasPreviousName).value == Some("true"), "visible")" data-condition="@keys.previousName.hasPreviousName.asId("true")">
      <h2>Previous name</h2>
      <fieldset>
        @wrapLabel(keys.previousName.previousName.firstName) {
          <span class="visuallyhidden">Previous</span> First name
        }
        @text(keys.previousName.previousName.firstName, attributes = Map('class -> "first-name long"))
        @wrapLabel(keys.previousName.previousName.middleNames) {
          <span class="visuallyhidden">Previous</span> Middle names
        }
        @text(keys.previousName.previousName.middleNames, attributes = Map('class -> "middle-names long"))
        @wrapLabel(keys.previousName.previousName.lastName) {
          <span class="visuallyhidden">Previous</span> Last name
        }
        @text(keys.previousName.previousName.lastName, attributes = Map('class -> "last-name long"))
      </fieldset> 
    </div>
    @validationMessages(formData)
    <button id="continue" type="submit" class="button next">Continue</button>
  }
}
